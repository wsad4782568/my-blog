### 前言

从小程序云开发出现后，我作为一个前端，开发起来是无比顺畅的。通过简单的serverless调用，就能实现后端的功能，而且很多微信的接口是直接封装打通的，非常方便。

正当我所有的小程序都依赖云开发的时候，腾讯云出了这个涨价的通知，最低配置20元/月。我表示伤不起，毕竟没有广告和其他收入。于是开启了这次迁移到云服务器之旅。

### 准备工作：

1、云服务器一台、域名、证书申请。（这些是我之前准备好的）

2、node.js搭建，MongoDB搭建，nginx搭建。（因为云开发也是使用node.js + MongoDB）

### 分步执行：

第一步：先在本地把整个node.js ＋ MongoDB 的服务搭起来，与小程序打通。

第二步：将本地的服务放到服务器上跑起来，同样与小程序打通。

第三步：重新发布小程序。

### 执行过程：

首先学习了node.js服务搭建与MongoDB连接，这里我推荐一个b站的视频：<a>https://www.bilibili.com/video/av802168265?vd_source=3eab49ea62650f39abdbf28e973d026c</a>
有文档、有git，零基础也可以上手，简单实用。

然后，如果你也有微信支付的需求，我推荐一个npm包：wxpay-v3。加密什么的都弄好了，直接v3支付，nice！

弄完这两个技术，剩下的就是业务代码的迁移了。毕竟现在不能直接调云开发的api，得全部通过请求的方式去实现。

代码都写好后，部署也简单。

先把本地的服务挪到服务器上。

在官网下载一个nginx，修改nginx.conf配置文件，这里推荐两个文档：

配置文件文档：<a>https://blog.csdn.net/qq575792372/article/details/122086219</a>

配置证书文档：<a>https://cloud.tencent.com/document/product/400/35244</a>


```
// 通过这两个命令让配置生效
start nginx
taskkill /fi "imagename eq nginx.EXE" /f 
```


最后把本地的小程序和服务器联调通过后，将小程序发布到线上就行。



### Tip:

云服务器赶上618、双11，用新用户的资格买，三年才两百多。

域名我用的后缀是top，也很便宜一年就30左右。

证书我用的是免费的，阿里云和腾讯云都可以申请。

小程序必须使用HTTPS请求，所以这些都要准备好。

如果是首次申请的域名，还要准备好备案。（我的是阿里云的域名，可以直接在阿里云上申请备案）


以上就是迁移的全部过程，如果有帮助请给我点个赞，Thanks♪(･ω･)ﾉ
